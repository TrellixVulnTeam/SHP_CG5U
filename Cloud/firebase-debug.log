[debug] [2018-01-31T01:02:44.612Z] ----------------------------------------------------------------------
[debug] [2018-01-31T01:02:44.615Z] Command:       /usr/local/Cellar/node/9.4.0/bin/node /usr/local/bin/firebase deploy
[debug] [2018-01-31T01:02:44.616Z] CLI Version:   3.16.0
[debug] [2018-01-31T01:02:44.616Z] Platform:      darwin
[debug] [2018-01-31T01:02:44.616Z] Node Version:  v9.4.0
[debug] [2018-01-31T01:02:44.616Z] Time:          Tue Jan 30 2018 20:02:44 GMT-0500 (EST)
[debug] [2018-01-31T01:02:44.616Z] ----------------------------------------------------------------------
[debug] 
[debug] [2018-01-31T01:02:44.635Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2018-01-31T01:02:44.635Z] > authorizing via signed-in user
[debug] [2018-01-31T01:02:44.637Z] > refreshing access token with scopes: ["email","https://www.googleapis.com/auth/cloud-platform","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","openid"]
[debug] [2018-01-31T01:02:44.637Z] >>> HTTP REQUEST POST https://www.googleapis.com/oauth2/v3/token  
 { refresh_token: '1/47usPBPjizPR9r6kMjnLyTirU903czv0W66Q4-V43b4',
  client_id: '563584335869-fgrhgmd47bqnekij5i8b5pr03ho849e6.apps.googleusercontent.com',
  client_secret: 'j9iVZfS8kkCEFUPaAeJV0sAi',
  grant_type: 'refresh_token',
  scope: 'email https://www.googleapis.com/auth/cloud-platform https://www.googleapis.com/auth/cloudplatformprojects.readonly https://www.googleapis.com/auth/firebase openid' } 
 Tue Jan 30 2018 20:02:44 GMT-0500 (EST)
[debug] [2018-01-31T01:02:45.843Z] <<< HTTP RESPONSE 200
[debug] [2018-01-31T01:02:45.870Z] >>> HTTP REQUEST GET https://admin.firebase.com/v1/projects/shpapp-3b3ca  
  
 Tue Jan 30 2018 20:02:45 GMT-0500 (EST)
[debug] [2018-01-31T01:02:46.474Z] <<< HTTP RESPONSE 200
[debug] [2018-01-31T01:02:46.474Z] >>> HTTP REQUEST GET https://admin.firebase.com/v1/database/shpapp-3b3ca/tokens  
  
 Tue Jan 30 2018 20:02:46 GMT-0500 (EST)
[debug] [2018-01-31T01:02:47.033Z] <<< HTTP RESPONSE 200
[info] 
[info] === Deploying to 'shpapp-3b3ca'...
[info] 
[info] i  deploying functions
[debug] [2018-01-31T01:02:47.430Z] > [functions] package.json contents: {
  "name": "stripe-functions",
  "description": "Stripe Firebase Functions",
  "dependencies": {
    "@google-cloud/logging": "^0.7.1",
    "firebase-admin": "^4.0.5",
    "firebase-functions": "^0.5.1",
    "moment": "^2.19.3"
  }
}
[info] i  functions: ensuring necessary APIs are enabled...
[debug] [2018-01-31T01:02:47.434Z] >>> HTTP REQUEST GET https://servicemanagement.googleapis.com/v1/services/cloudfunctions.googleapis.com/projectSettings/shpapp-3b3ca?view=CONSUMER_VIEW  
  
 Tue Jan 30 2018 20:02:47 GMT-0500 (EST)
[debug] [2018-01-31T01:02:47.435Z] >>> HTTP REQUEST GET https://servicemanagement.googleapis.com/v1/services/runtimeconfig.googleapis.com/projectSettings/shpapp-3b3ca?view=CONSUMER_VIEW  
  
 Tue Jan 30 2018 20:02:47 GMT-0500 (EST)
[debug] [2018-01-31T01:02:48.365Z] <<< HTTP RESPONSE 200
[debug] [2018-01-31T01:02:48.428Z] <<< HTTP RESPONSE 200
[info] ✔  functions: all necessary APIs are enabled
[debug] [2018-01-31T01:02:48.430Z] >>> HTTP REQUEST GET https://appengine.googleapis.com/v1/apps/shpapp-3b3ca  
  
 Tue Jan 30 2018 20:02:48 GMT-0500 (EST)
[debug] [2018-01-31T01:02:48.430Z] >>> HTTP REQUEST GET https://apikeys.googleapis.com/v1/projects/shpapp-3b3ca/apiKeys  
  
 Tue Jan 30 2018 20:02:48 GMT-0500 (EST)
[debug] [2018-01-31T01:02:48.877Z] <<< HTTP RESPONSE 200
[debug] [2018-01-31T01:02:49.009Z] <<< HTTP RESPONSE 200
[info] i  functions: preparing functions directory for uploading...
[debug] [2018-01-31T01:02:58.335Z] >>> HTTP REQUEST GET https://runtimeconfig.googleapis.com/v1beta1/projects/shpapp-3b3ca/configs  
  
 Tue Jan 30 2018 20:02:58 GMT-0500 (EST)
[debug] [2018-01-31T01:03:01.884Z] <<< HTTP RESPONSE 200
[info] i  functions: packaged functions (23.62 KB) for uploading
[debug] [2018-01-31T01:03:04.951Z] >>> HTTP REQUEST GET https://www.googleapis.com/storage/v1/b/staging.shpapp-3b3ca.appspot.com  
  
 Tue Jan 30 2018 20:03:04 GMT-0500 (EST)
[debug] [2018-01-31T01:03:05.126Z] <<< HTTP RESPONSE 200
[debug] [2018-01-31T01:03:05.126Z] >>> HTTP REQUEST POST https://www.googleapis.com/upload/storage/v1/b/staging.shpapp-3b3ca.appspot.com/o?uploadType=media&name=firebase-functions-source  
 ReadStream {
  _readableState: 
   ReadableState {
     objectMode: false,
     highWaterMark: 65536,
     buffer: BufferList { head: [Object], tail: [Object], length: 1 },
     length: 24183,
     pipes: null,
     pipesCount: 0,
     flowing: null,
     ended: true,
     endEmitted: false,
     reading: false,
     sync: false,
     needReadable: false,
     emittedReadable: true,
     readableListening: false,
     resumeScheduled: false,
     destroyed: false,
     defaultEncoding: 'utf8',
     awaitDrain: 0,
     readingMore: false,
     decoder: null,
     encoding: null },
  readable: true,
  domain: null,
  _events: { end: [Function] },
  _eventsCount: 1,
  _maxListeners: undefined,
  path: '/var/folders/lm/_w1r73ns6h542c87_y5hv8lc0000gn/T/firebase-functions-28745ivNyPMkOtOtk.zip',
  fd: 19,
  flags: 'r',
  mode: 438,
  start: undefined,
  end: undefined,
  autoClose: true,
  pos: undefined,
  bytesRead: 24183,
  closed: false } 
 Tue Jan 30 2018 20:03:05 GMT-0500 (EST)
[debug] [2018-01-31T01:03:06.708Z] <<< HTTP RESPONSE 200
[info] ✔  functions: functions folder uploaded successfully
[debug] [2018-01-31T01:03:06.710Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/projects/shpapp-3b3ca/locations/us-central1/functions  
  
 Tue Jan 30 2018 20:03:06 GMT-0500 (EST)
[debug] [2018-01-31T01:03:07.466Z] <<< HTTP RESPONSE 200
[info] i  functions: updating function sendChatNotification...
[debug] [2018-01-31T01:03:07.468Z] Trigger is:  {"eventTrigger":{"resource":"projects/_/instances/shpapp-3b3ca/refs/messages/{messageId}","eventType":"providers/google.firebase.database/eventTypes/ref.create"}}
[debug] [2018-01-31T01:03:07.470Z] >>> HTTP REQUEST PATCH https://cloudfunctions.googleapis.com/v1/projects/shpapp-3b3ca/locations/us-central1/functions/sendChatNotification 
query params: {"updateMask":"sourceArchiveUrl,name,labels,eventTrigger.resource,eventTrigger.eventType"} 
 { sourceArchiveUrl: 'gs://staging.shpapp-3b3ca.appspot.com/firebase-functions-source',
  name: 'projects/shpapp-3b3ca/locations/us-central1/functions/sendChatNotification',
  labels: { 'deployment-tool': 'cli-firebase' },
  eventTrigger: 
   { resource: 'projects/_/instances/shpapp-3b3ca/refs/messages/{messageId}',
     eventType: 'providers/google.firebase.database/eventTypes/ref.create' } } 
 Tue Jan 30 2018 20:03:07 GMT-0500 (EST)
[debug] [2018-01-31T01:03:08.037Z] <<< HTTP RESPONSE 200
[debug] [2018-01-31T01:03:08.040Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/c2hwYXBwLTNiM2NhL3VzLWNlbnRyYWwxL3NlbmRDaGF0Tm90aWZpY2F0aW9uLzVvSTJzU3hLYTZN  
  
 Tue Jan 30 2018 20:03:08 GMT-0500 (EST)
[debug] [2018-01-31T01:03:08.482Z] <<< HTTP RESPONSE 200
[debug] [2018-01-31T01:03:10.485Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/c2hwYXBwLTNiM2NhL3VzLWNlbnRyYWwxL3NlbmRDaGF0Tm90aWZpY2F0aW9uLzVvSTJzU3hLYTZN  
  
 Tue Jan 30 2018 20:03:10 GMT-0500 (EST)
[debug] [2018-01-31T01:03:10.832Z] <<< HTTP RESPONSE 200
